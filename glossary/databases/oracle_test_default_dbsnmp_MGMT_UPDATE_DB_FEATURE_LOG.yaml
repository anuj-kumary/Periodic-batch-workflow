name: MGMT_UPDATE_DB_FEATURE_LOG
fullyQualifiedName: oracle_test.default.dbsnmp.MGMT_UPDATE_DB_FEATURE_LOG
storedProcedureCode:
  language: SQL
  code: "PROCEDURE mgmt_update_db_feature_log(src IN VARCHAR2)\nAS\n    l_last_update_date\
    \ mgmt_db_feature_log.last_update_date%TYPE;\n    current_date mgmt_db_feature_log.last_update_date%TYPE;\n\
    \    diff interval day(9) to second(9);\n    diff_min NUMBER;\n  BEGIN\n    current_date\
    \ := SYSTIMESTAMP;\n    SELECT last_update_date\n      INTO l_last_update_date\n\
    \        FROM mgmt_db_feature_log\n        WHERE source = src;\n    diff := current_date\
    \ - l_last_update_date;\n    diff_min := EXTRACT(DAY FROM diff)*24*60+EXTRACT(HOUR\
    \ FROM diff)*60+EXTRACT(MINUTE FROM diff);\n    -- 2 hours 2x60=120\n    IF (diff_min\
    \ > 120) THEN\n    \tUPDATE mgmt_db_feature_log set last_update_date = current_date\
    \ WHERE source = src;\n\tcommit;\n    END IF;\n  EXCEPTION\n    when NO_DATA_FOUND\
    \ then\n      BEGIN\n        INSERT INTO mgmt_db_feature_log VALUES (src, systimestamp);\n\
    \tcommit;\n      END;\n  END;"
dataProducts: []
databaseSchema:
  id: 456c1329-65cb-4a23-ae5d-ffe945897b97
  type: databaseSchema
  name: dbsnmp
  fullyQualifiedName: oracle_test.default.dbsnmp
  displayName: dbsnmp
  deleted: false
database:
  id: 635299d9-9c3d-4ccc-98ff-dfb95889d8d6
  type: database
  name: default
  fullyQualifiedName: oracle_test.default
  displayName: default
  deleted: false
service:
  id: 81062063-d522-406b-92a3-ccad1f68f1ad
  type: databaseService
  name: oracle_test
  fullyQualifiedName: oracle_test
  displayName: oracle_test
  deleted: false
serviceType: Oracle
owners: []
tags: []
domains: []
sourceHash: 0ae8f69949d59f6085727f30319ce3e3
processedLineage: false
entityStatus: Approved
