name: DBMS_FEATURE_AUTO_SSM
fullyQualifiedName: oracle_test.default.sys.DBMS_FEATURE_AUTO_SSM
storedProcedureCode:
  language: SQL
  code: |2-
           feature_info     OUT  CLOB)
    PROCEDURE dbms_feature_auto_ssm
         ( feature_boolean  OUT  NUMBER,
           aux_count        OUT  NUMBER,
    AS
      auto_seg_space boolean;
      ts_info        varchar2(1000);
    BEGIN

      /* initialize everything */
      auto_seg_space := FALSE;
      ts_info        := '';
      aux_count      := 0;

      for ts_type in
         (select segment_space_management, count(*) tcount, sum(size_mb) size_mb
           from
            (select ts.tablespace_name, segment_space_management,
                  sum(bytes)/1048576 size_mb
              from dba_data_files df, dba_tablespaces ts
             where df.tablespace_name = ts.tablespace_name
             group by ts.tablespace_name, segment_space_management)
           group by segment_space_management)
      loop

        /* check for auto segment space management */
        if ((ts_type.segment_space_management = 'AUTO') and
             (ts_type.tcount > 0)) then
          auto_seg_space  := TRUE;
          aux_count       := ts_type.tcount;
        end if;

        ts_info := ts_info ||
            '(Segment Space Management: ' || ts_type.segment_space_management ||
           ', TS Count: ' || ts_type.tcount ||
           ', Size MB: '  || ts_type.size_mb || ') ';

      end loop;

      /* set the boolean and feature info.  the aux count is already set above */
      if (auto_seg_space) then
        feature_boolean := 1;
        feature_info    := to_clob(ts_info);
      else
        feature_boolean := 0;
        feature_info    := null;
      end if;

    END dbms_feature_auto_ssm;
dataProducts: []
storedProcedureType: StoredProcedure
databaseSchema:
  id: a11e2293-c7ca-4d3a-9e0f-ebcfa337159d
  type: databaseSchema
  name: sys
  fullyQualifiedName: oracle_test.default.sys
  displayName: sys
  deleted: false
database:
  id: 635299d9-9c3d-4ccc-98ff-dfb95889d8d6
  type: database
  name: default
  fullyQualifiedName: oracle_test.default
  displayName: default
  deleted: false
service:
  id: 81062063-d522-406b-92a3-ccad1f68f1ad
  type: databaseService
  name: oracle_test
  fullyQualifiedName: oracle_test
  displayName: oracle_test
  deleted: false
serviceType: Oracle
owners: []
tags: []
domains: []
sourceHash: 40348deec8ae24fec2bb89476ed17313
processedLineage: false
entityStatus: Approved
