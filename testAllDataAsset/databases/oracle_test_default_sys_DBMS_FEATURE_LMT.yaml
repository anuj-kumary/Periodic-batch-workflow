name: DBMS_FEATURE_LMT
fullyQualifiedName: oracle_test.default.sys.DBMS_FEATURE_LMT
storedProcedureCode:
  language: SQL
  code: |-
    PROCEDURE dbms_feature_lmt
         ( feature_boolean  OUT  NUMBER,
           aux_count        OUT  NUMBER,
           feature_info     OUT  CLOB)
    AS
      loc_managed boolean;
      ts_info     varchar2(1000);
    BEGIN

      /* initialize everything */
      loc_managed := FALSE;
      ts_info     := '';
      aux_count   := 0;

      for ts_type in
         (select extent_management, count(*) tcount, sum(size_mb) size_mb
           from
            (select ts.tablespace_name, extent_management,
                    sum(bytes)/1048576 size_mb
               from dba_data_files df, dba_tablespaces ts
              where df.tablespace_name = ts.tablespace_name
              group by ts.tablespace_name, extent_management)
           group by extent_management)
      loop

        /* check for auto segment space management */
        if ((ts_type.extent_management = 'LOCAL') and
             (ts_type.tcount > 0)) then
          loc_managed  := TRUE;
          aux_count       := ts_type.tcount;
        end if;

        ts_info := ts_info ||
            '(Extent Management: ' || ts_type.extent_management ||
           ', TS Count: ' || ts_type.tcount ||
           ', Size MB: '  || ts_type.size_mb || ') ';

      end loop;

      /* set the boolean and feature info.  the aux count is already set above */
      if (loc_managed) then
        feature_boolean := 1;
        feature_info    := to_clob(ts_info);
      else
        feature_boolean := 0;
        feature_info    := null;
      end if;

    END dbms_feature_lmt;
dataProducts: []
databaseSchema:
  id: a11e2293-c7ca-4d3a-9e0f-ebcfa337159d
  type: databaseSchema
  name: sys
  fullyQualifiedName: oracle_test.default.sys
  displayName: sys
  deleted: false
database:
  id: 635299d9-9c3d-4ccc-98ff-dfb95889d8d6
  type: database
  name: default
  fullyQualifiedName: oracle_test.default
  displayName: default
  deleted: false
service:
  id: 81062063-d522-406b-92a3-ccad1f68f1ad
  type: databaseService
  name: oracle_test
  fullyQualifiedName: oracle_test
  displayName: oracle_test
  deleted: false
serviceType: Oracle
owners: []
tags: []
domains: []
sourceHash: dd6ff67f40bdc8d7cc4b80e7537d2e21
processedLineage: false
entityStatus: Approved
